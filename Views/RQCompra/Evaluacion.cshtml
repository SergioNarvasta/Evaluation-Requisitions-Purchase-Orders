@model HDProjectWeb.Models.RQCompra

@{
    ViewData["Title"] = " Evaluacion de Requisicion ";
}
<div class="d-inline-flex" >
   <h2 style="width:700px" class="ms-5" >EVALUACION DE REQUISICION</h2>
    <div class="mt-2" style="margin-left:200px">
        <select asp-for="Rco_estado" id="cbo_estado" class="ms-2 me-2" disabled>
            <option value="1">VIGENTE</option>
            <option value="0">ANULADO</option>
        </select>
        <label><strong>Codigo Interno</strong></label> <input asp-for="CodInterno" class="ms-2" style="width:50px" disabled />
    </div>
</div>
<div class="form-group d-flex flex-row mb-2 ms-4">
    <form asp-controller="RQCompra" asp-action="Aprobar" method="post">
        <input type="text" name="cia" value="@ViewBag.cia" style="display:none" />
        <input type="text" name="usu" value="@ViewBag.usu" style="display:none" />
        <input type="text" name="epk" value="@ViewBag.epk" style="display:none" />
        <input type="text" name="num" value="@ViewBag.num" style="display:none" />
        <button type="submit" style="width:120px;height:37px" class="btn btn-primary ms-3 me-3 @( ViewBag.sit <1 ? "disabled": null )">Aprobar</button>
    </form>
    <button onclick="btn_abrir_modal_motivo()" type="submit" class="btn btn-primary ms-3 me-3 @( ViewBag.sit <1 ? "disabled": null )" style="width:120px;height:37px">Rechazar</button>
    <form asp-controller="RQCompra" asp-action="Devolver" method="post">
        <input type="text" name="cia" value="@ViewBag.cia" style="display:none" />
        <input type="text" name="usu" value="@ViewBag.usu" style="display:none" />
        <input type="text" name="epk" value="@ViewBag.epk" style="display:none" />
        <input type="text" name="num" value="@ViewBag.num" style="display:none" />
        <button type="submit" style="width:120px;height:37px" class="btn btn-primary ms-3 me-3 @( ViewBag.sit <1 ? "disabled": null )">Devolver</button>
    </form>

    <button id="btn_abrir_modal_motivo" class="btn btn-outline-success" style="display:none" data-bs-toggle="modal" data-bs-target="#Modal_Mot">+</button>
    <div class="modal" id="Modal_Mot">
        <div class="modal-dialog modal-dialog-scrollable ">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title ms-5">Ingrese Motivo de Rechazo</h4> 
                </div>
                <div class="modal-body">
                    <form asp-controller="RQCompra" asp-action="Rechazar" method="post">
                        <input type="text" name="cia" value="@ViewBag.cia" style="display:none" />
                        <input type="text" name="usu" value="@ViewBag.usu" style="display:none" />
                        <input type="text" name="epk" value="@ViewBag.epk" style="display:none" />
                        <input type="text" name="num" value="@ViewBag.num" style="display:none" />
                        <input type="text" name="mot" id="mot_rechazo_req" style="width:450px;height:100px" class="form-control"/>
                        <button id="btn_envia_rechazo_req" type="submit" style="display:none">Enviar</button>
                    </form>  
                </div>
                <div class="modal-footer">
                        <button onclick="validaMotivo()" id="btn_cerrar_modal_motivo" type="button" class="btn btn-danger" data-bs-dismiss="modal">Enviar</button>        
                </div>
            </div>
        </div>
    </div>
</div> <br />
<div id="Box-Main">
    <div class="col-md-4">
        <div class="d-inline-flex">
            
            <div class="form-group d-flex flex-row me-2">
                <label class="me-2 "><strong>Num_Requerimiento</strong> </label>
                <input asp-for="Rco_numero" class="form-control form-control-sm col-sm-4" style="width:200px" type="text" />
            </div>
            <div class="form-group d-flex flex-row ms-xl-5">
                <label><strong>Fecha_Registro</strong></label>
                <input asp-for="Rco_fec_registro" class="form-control form-control-sm ms-2" style="width:330px" />  
            </div>
            <div class="d-flex flex-row ms-xl-5">
                <label><strong>Tipo_Requerimiento</strong> </label>
                <select asp-for="Tre_codepk" id="cbo_tipo" class="ms-2" disabled>
                    <option value="1">COMPRA REGULAR</option>
                </select>
            </div>
        </div> <br />
        <div class="d-inline-flex">
            <div style="width:500px">
                <div class="form-group d-flex flex-row mt-3">
                    <div style="width:130px"><label><strong>Empresa</strong></label> </div>
                    <input class="ms-2" asp-for="Empresa" style="width:230px" disabled />
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label class=" me-4"><strong>Solicitante</strong></label> </div>
                    <input asp-for="Uap_codemp" class="form-control form-control-sm ms-2" style="width:90px" />
                    <input asp-for="Uap_deslar" class="form-control form-control-sm ms-1" style="width:230px" />
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label class=" me-4"><strong>Proyecto</strong></label> </div>
                    <input asp-for="Uap_codemp" class="form-control form-control-sm ms-2" style="width:90px" />
                    <input asp-for="Uap_deslar" class="form-control form-control-sm ms-1" style="width:230px" />
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label><strong>Presupuestado</strong></label></div>
                    <select asp-for="Rco_presup" class="ms-2" disabled>
                        <option value="2"> SI </option>
                        <option value="1"> NO </option>
                    </select>
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label><strong>Reembolsable</strong></label></div>
                    <select asp-for="Rco_rembls" class="ms-2" disabled>
                        <option value="2"> SI </option>
                        <option value="1"> NO </option>
                    </select>
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label><strong>Motivo</strong></label></div>
                    <textarea asp-for="Rco_motivo" class="form-control ms-2" style="height:80px;width:325px"></textarea>
                </div>
            </div>

            <div style="width:500px">
                <div class="mt-3"><label class="ms-xl-5" style="color:darkblue"><strong>Datos Generales</strong></label></div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label class=" me-4"><strong>Aprobador</strong></label> </div>
                    <input asp-for="Uap_codemp" class="form-control form-control-sm ms-2" style="width:90px" />
                    <input asp-for="Uap_deslar" class="form-control form-control-sm ms-1" style="width:230px" />
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label class=" me-4"><strong>Area</strong></label> </div>
                    <input asp-for="Uap_codemp" class="form-control form-control-sm ms-2" style="width:90px" />
                    <input asp-for="Uap_deslar" class="form-control form-control-sm ms-1" style="width:230px" />
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label><strong>Disciplina</strong></label> </div>
                    <input asp-for="Dis_codepk" class="form-control form-control-sm ms-2" style="width:90px" />
                    <input asp-for="Dis_nomlar" class="form-control form-control-sm ms-1" style="width:230px" />
                </div>
                <div class="form-group d-flex flex-row mt-2">
                    <div style="width:130px"><label><strong>Clase</strong></label> </div>
                    <input asp-for="Ung_codepk" class="form-control form-control-sm ms-2" style="width:90px" />
                    <input class="form-control form-control-sm ms-1" style="width:230px" />
                </div>
                <div class="d-flex flex-row mt-2">
                    <div style="width:130px"><label><strong>Prioridad</strong></label> </div>
                    <select asp-for="Rco_priori" class="ms-2" style="height:28px" disabled>
                        <option value="1">MUY ALTA</option>
                        <option value="2">ALTA</option>
                        <option value="3">MEDIA</option>
                        <option value="4">BAJA</option>
                    </select>
                    <textarea class="form-control ms-2" style="height:80px;width:220px"></textarea>
                </div>
            </div>
            <div style="width:300px">
                <div class="form-group d-flex flex-column mt-3">
                    <div style="width:130px" class="ms-xl-5"><label><strong>Situacion</strong></label> </div>
                    <select asp-for="Rco_sitrco" class="ms-2" style="width:180px" disabled>
                        <option value="1">PENDIENTE</option>
                        <option value="2">APROBADO </option>
                        <option value="3">RECHAZADO</option>
                    </select>
                </div>
                <div class="d-flex flex-row mt-2 ms-3">
                    <input asp-for="Rco_indval" class="form-check-input" type="checkbox" />
                    <label class="form-check-label ms-2">Categorizado</label>
                </div>
                <div class="d-flex flex-row mt-2 ms-3">
                    <input asp-for="Rco_indval" class="form-check-input" type="checkbox" />
                    <label class="form-check-label ms-2">Con Solicitud</label>
                </div>
                <div class="d-flex flex-row mt-2 ms-3">
                    <input asp-for="Rco_indval" class="form-check-input" type="checkbox" />
                    <label class="form-check-label ms-2">Cuadro Comparativo</label>
                </div>
                <div class="d-flex flex-row mt-2 ms-3">
                    <input asp-for="Rco_indval" class="form-check-input" type="checkbox" />
                    <label class="form-check-label ms-2">Con Orden de Compra</label>
                </div>
            </div>
        </div>               
            <!-- TABLA PRODUCTOS -->
            <div class="table">
                <table id="tblProductos" class="table table-bordered table-hover">
                <thead class="table-primary">
                    <tr>
                        <th></th>
                        <th>Item</th>
                        <th>Codigo</th>
                        <th>Descripcion</th>
                        <th>Detalle</th>
                        <th>Unidad</th>
                        <th>Cantidad</th>
                        <th>Codigo Proveedor</th>
                        <th>Proveedor</th>
                        <th>Sustento</th>
                    </tr>
                </thead> 
                <tbody id="tbody_prd" class="table table-bordered">
                     @await Component.InvokeAsync("DetalleReq",ViewBag.Rco_numero)
                </tbody>                  
                </table>
            </div>     
            <!-- TABLA ADJUNTOS-->
            <br />
            <p class="justify-content-center text-"><strong>ADJUNTOS</strong></p>
           
            <div class="">
                <table id="tblAdjuntos" class="table table-bordered table-hover">
                <thead class="table-primary">
                    <tr>
                        <th></th>
                        <th>Item</th>
                        <th>Nombre Archivo</th>
                        <th>Archivo</th>
                        <th>Codigo Archivo</th>
                        <th>Vista Previa Archivo</th>
                    </tr>
                </thead>
                <tbody>                    
                    @await Component.InvokeAsync("DetalleAdjuntos",ViewBag.Rco_numero)                      
                </tbody>
            </table>
                <br />
            </div>

            <p style="color:red">@ViewBag.url </p>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
